{"ast":null,"code":"import _regeneratorRuntime from\"D:/HOC_CUNG_HOI_DAN_IT/practiceReact/React-Practice/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/HOC_CUNG_HOI_DAN_IT/practiceReact/React-Practice/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{loginApi}from\"../../services/UserService\";import{toast}from'react-toastify';export var FETCH_USER_LOGIN='FETCH_USER_LOGIN';export var FETCH_USER_ERROR='FETCH_USER_ERROR';export var FETCH_USER_SUCCESS='FETCH_USER_SUCCESS';export var USER_LOGOUT='USER_LOGOUT';export var USER_REFRESH='USER_REFRESH';export var handleLoginRedux=function handleLoginRedux(email,password){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(dispatch,getState){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:dispatch({type:FETCH_USER_LOGIN});_context.next=3;return loginApi(email.trim(),password);case 3:res=_context.sent;// console.log(\"check login: \", res);\nif(res&&res.token){localStorage.setItem('token',res.token);localStorage.setItem('email',email.trim());dispatch({type:FETCH_USER_SUCCESS,data:{email:email.trim(),token:res.token}});}else{if(res&&res.status===400){toast.error(res.data.error);}dispatch({type:FETCH_USER_ERROR});}case 5:case\"end\":return _context.stop();}},_callee);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();};export var handleLogoutRedux=function handleLogoutRedux(){return function(dispatch,getState){dispatch({type:USER_LOGOUT});};};export var handleRefresh=function handleRefresh(){return function(dispatch,getState){dispatch({type:USER_REFRESH});};};","map":{"version":3,"names":["loginApi","toast","FETCH_USER_LOGIN","FETCH_USER_ERROR","FETCH_USER_SUCCESS","USER_LOGOUT","USER_REFRESH","handleLoginRedux","email","password","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","dispatch","getState","res","wrap","_callee$","_context","prev","next","type","trim","sent","token","localStorage","setItem","data","status","error","stop","_x","_x2","apply","arguments","handleLogoutRedux","handleRefresh"],"sources":["D:/HOC_CUNG_HOI_DAN_IT/practiceReact/React-Practice/src/redux/actions/userAction.js"],"sourcesContent":["import {loginApi} from \"../../services/UserService\";\r\nimport {toast} from 'react-toastify';\r\n\r\nexport const FETCH_USER_LOGIN = 'FETCH_USER_LOGIN';\r\n\r\nexport const FETCH_USER_ERROR = 'FETCH_USER_ERROR';\r\n\r\nexport const FETCH_USER_SUCCESS = 'FETCH_USER_SUCCESS';\r\n\r\nexport const USER_LOGOUT = 'USER_LOGOUT';\r\n\r\nexport const USER_REFRESH = 'USER_REFRESH';\r\n\r\nexport const handleLoginRedux = (email, password) => {\r\n    return async (dispatch, getState) => {\r\n        dispatch({type: FETCH_USER_LOGIN,});\r\n\r\n        let res = await loginApi(email.trim(), password);\r\n        // console.log(\"check login: \", res);\r\n        if(res && res.token) {\r\n\r\n            localStorage.setItem('token', res.token);\r\n            localStorage.setItem('email', email.trim());\r\n\r\n            dispatch({type: FETCH_USER_SUCCESS, \r\n                data: {email: email.trim(), token: res.token}\r\n            });\r\n        } else {\r\n            if(res && res.status === 400) {\r\n                toast.error (res.data.error);\r\n            }\r\n\r\n            dispatch({\r\n                type: FETCH_USER_ERROR\r\n            });\r\n        }\r\n    };\r\n}\r\n\r\nexport const handleLogoutRedux = () => {\r\n    return (dispatch, getState) => {\r\n        dispatch({\r\n            type: USER_LOGOUT\r\n        })\r\n    }\r\n}   \r\n\r\nexport const handleRefresh = () => {\r\n    return (dispatch, getState) => {\r\n        dispatch({\r\n            type: USER_REFRESH\r\n        })\r\n    }\r\n}"],"mappings":"kSAAA,OAAQA,QAAQ,KAAO,4BAA4B,CACnD,OAAQC,KAAK,KAAO,gBAAgB,CAEpC,MAAO,IAAM,CAAAC,gBAAgB,CAAG,kBAAkB,CAElD,MAAO,IAAM,CAAAC,gBAAgB,CAAG,kBAAkB,CAElD,MAAO,IAAM,CAAAC,kBAAkB,CAAG,oBAAoB,CAEtD,MAAO,IAAM,CAAAC,WAAW,CAAG,aAAa,CAExC,MAAO,IAAM,CAAAC,YAAY,CAAG,cAAc,CAE1C,MAAO,IAAM,CAAAC,gBAAgB,CAAG,QAAnB,CAAAA,gBAAgBA,CAAIC,KAAK,CAAEC,QAAQ,CAAK,CACjD,kCAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAO,SAAAC,QAAOC,QAAQ,CAAEC,QAAQ,MAAAC,GAAA,QAAAL,mBAAA,GAAAM,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAC5BP,QAAQ,CAAC,CAACQ,IAAI,CAAErB,gBAAiB,CAAC,CAAC,CAACkB,QAAA,CAAAE,IAAA,SAEpB,CAAAtB,QAAQ,CAACQ,KAAK,CAACgB,IAAI,CAAC,CAAC,CAAEf,QAAQ,CAAC,QAA5CQ,GAAG,CAAAG,QAAA,CAAAK,IAAA,CACP;AACA,GAAGR,GAAG,EAAIA,GAAG,CAACS,KAAK,CAAE,CAEjBC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAEX,GAAG,CAACS,KAAK,CAAC,CACxCC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAEpB,KAAK,CAACgB,IAAI,CAAC,CAAC,CAAC,CAE3CT,QAAQ,CAAC,CAACQ,IAAI,CAAEnB,kBAAkB,CAC9ByB,IAAI,CAAE,CAACrB,KAAK,CAAEA,KAAK,CAACgB,IAAI,CAAC,CAAC,CAAEE,KAAK,CAAET,GAAG,CAACS,KAAK,CAChD,CAAC,CAAC,CACN,CAAC,IAAM,CACH,GAAGT,GAAG,EAAIA,GAAG,CAACa,MAAM,GAAK,GAAG,CAAE,CAC1B7B,KAAK,CAAC8B,KAAK,CAAEd,GAAG,CAACY,IAAI,CAACE,KAAK,CAAC,CAChC,CAEAhB,QAAQ,CAAC,CACLQ,IAAI,CAAEpB,gBACV,CAAC,CAAC,CACN,CAAC,wBAAAiB,QAAA,CAAAY,IAAA,MAAAlB,OAAA,GACJ,mBAAAmB,EAAA,CAAAC,GAAA,SAAAxB,IAAA,CAAAyB,KAAA,MAAAC,SAAA,QACL,CAAC,CAED,MAAO,IAAM,CAAAC,iBAAiB,CAAG,QAApB,CAAAA,iBAAiBA,CAAA,CAAS,CACnC,MAAO,UAACtB,QAAQ,CAAEC,QAAQ,CAAK,CAC3BD,QAAQ,CAAC,CACLQ,IAAI,CAAElB,WACV,CAAC,CAAC,CACN,CAAC,CACL,CAAC,CAED,MAAO,IAAM,CAAAiC,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAA,CAAS,CAC/B,MAAO,UAACvB,QAAQ,CAAEC,QAAQ,CAAK,CAC3BD,QAAQ,CAAC,CACLQ,IAAI,CAAEjB,YACV,CAAC,CAAC,CACN,CAAC,CACL,CAAC"},"metadata":{},"sourceType":"module"}